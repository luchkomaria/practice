<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Документ без названия</title>
<link href="style.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
</head>

<body id ="body">
<div id = "block" onclick="RandomCoordinates(), getRandomColor(), block()">
<p id = "top">MarginLeft = 0</p>
<p id = "left">MarginTop = 0</p>
<button id="save">Save to database</button>
</div>

<script>
function RandomCoordinates(){
	var left = Math.floor(Math.random() * 90);
	var top = Math.floor(Math.random() * 90);;
	var element = document.getElementById("block");
	var left = element.style.left = left + "%";
	var top = element.style.top = top + "%";
	document.getElementById("left").innerHTML = "MarginLeft =" + left;
	document.getElementById("top").innerHTML = "MarginTop =" + top;
	}
function getRandomColor() {
    var letters = '0123456789ABCDEF';
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
	return color;
	}
	function colorcompare(hex1, hex2) {
    var r1 = parseInt(hex1.substring(1, 3), 16);
    var g1 = parseInt(hex1.substring(3, 5), 16);
    var b1 = parseInt(hex1.substring(6, 7), 16);

    var r2 = parseInt(hex2.substring(1, 3), 16);
    var g2 = parseInt(hex2.substring(3, 5), 16);
    var b2 = parseInt(hex2.substring(6, 7), 16);

    var r = 255 - Math.abs(r1 - r2);
    var g = 255 - Math.abs(g1 - g2);
    var b = 255 - Math.abs(b1 - b2);

    r /= 255;
    g /= 255;
    b /= 255;
    
    return (r + g + b) / 3;
}
	function block(){
	var b = document.getElementById("block").style.backgroundColor = getRandomColor();
	var g = document.getElementById("body").style.backgroundColor = getRandomColor();
	var c = colorcompare(b, g);
	if(c<=0.5){
		document.getElementById("block").style.borderColor = "black";}
	else{
		document.getElementById("block").style.borderColor = "transparent";}
	}
$(document).ready(function(){
	$(":button").click(function(){
		$.ajax({
			type: "POST",
			url: "data.php",
			data:{background: $('g'), box: $('b')},
			success: function(response){
				if(response == "good"){$("#text").html("Complete");}
			}
		})
	});
});
</script>
</body>
</html>